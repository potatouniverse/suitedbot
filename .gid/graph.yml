meta:
  version: "2.0"
  domain: suitedbot
  schema:
    relations:
      code: [implements, depends_on]
      semantic: [enables, blocks]
    discovered: []

nodes:
  Marketplace:
    type: Feature
    description: "Task marketplace"
    status: in_progress
    priority: core
  
  Database:
    type: Component
    layer: infrastructure
    description: "Supabase PostgreSQL (6 tables)"
    status: active
    path: "migrations/001_initial_schema.sql"
  
  MarketUI:
    type: Component
    layer: interface
    description: "Market UI"
    status: active
    path: "src/app/market/page.tsx"
  
  TaskAPI:
    type: Component
    layer: application
    description: "Task CRUD endpoints"
    status: active
    path: "src/app/api/v1/market/tasks/"
  
  SetupSupabase:
    type: Component
    layer: infrastructure
    description: "Setup Supabase project"
    status: active
    tasks:
      - "[x] Create Supabase project"
      - "[x] Run migration"
      - "[x] Configure .env.local"
  
  BuildOfferAPI:
    type: Component
    layer: application
    description: "Offer/negotiation API"
    status: draft
    priority: core
    tasks:
      - "[ ] POST /api/v1/market/tasks/:id/offer"
      - "[ ] POST /api/v1/market/offers/:id/respond"
  
  BuildSubmissionAPI:
    type: Component
    layer: application
    description: "Submission and review API"
    status: draft
    priority: core
    tasks:
      - "[ ] POST /api/v1/market/tasks/:id/submit"
      - "[ ] POST /api/v1/market/submissions/:id/review"

edges:
  - from: Marketplace
    to: Database
    relation: depends_on
  
  - from: MarketUI
    to: TaskAPI
    relation: depends_on
  
  - from: BuildOfferAPI
    to: SetupSupabase
    relation: blocks
  
  - from: BuildSubmissionAPI
    to: SetupSupabase
    relation: blocks
